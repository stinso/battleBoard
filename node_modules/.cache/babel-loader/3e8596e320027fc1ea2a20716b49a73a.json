{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mukki\\\\Documents\\\\workspace\\\\chaingames\\\\battleBoard\\\\client\\\\src\\\\layouts\\\\MainLayout\\\\NavBar\\\\index.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable no-use-before-define */\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useLocation, matchPath } from 'react-router-dom';\nimport { Link as RouterLink } from 'react-router-dom';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport PropTypes from 'prop-types';\nimport { Avatar, Box, Button, Divider, Drawer, List, ListSubheader, Paper, Typography, makeStyles } from '@material-ui/core';\nimport { User as UserIcon, Settings as ToolIcon, LogOut as LogoutIcon, List as ListIcon, CreditCard as CreditcardIcon, Phone as PhoneIcon, ChevronsDown as WithdrawIcon, Award as AwardIcon, Calendar as CalendarIcon } from 'react-feather';\nimport NavItem from './NavItem';\nimport NumberFormat from 'react-number-format';\nimport { useSelector } from 'src/store'; //import Notification from './EthAddressNotLinkedNotification'\n\nimport * as Sentry from \"@sentry/react\";\nimport { AuthContext } from \"../../../context/AuthContext\";\nimport { ApproveRedirectLink, DepositRedirectLink, RedirectURL, RegisterEthAddressRedirectURL } from \"../../../config/constants\";\nimport { getBalance, formatInCHAIN } from '../../../utils/helpers.js';\nimport { getTotalEventsService, getTotalWinningsService, getBalanceFromCS } from '../../../service/node.service';\nimport { MAX_APPROVED_BALANCE } from '../../../config/constants'; //import Wizard from '../initialStepsWizard/index';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WizardEnums = {\n  AccountLink: 1,\n  Approve: 2,\n  Deposit: 3,\n  ConsoleLink: 4\n};\nconst mySections = [{\n  items: [{\n    title: 'My Events',\n    icon: CalendarIcon,\n    href: '/upcomingEvents'\n  }, {\n    title: 'My Challanges',\n    icon: AwardIcon,\n    href: '/challenges'\n  }]\n}];\nconst sections = [{\n  items: [{\n    title: 'Profile',\n    icon: UserIcon,\n    href: '/profile'\n  }, {\n    title: 'My Wallet',\n    icon: CreditcardIcon,\n    href: 'https://wallet.chaingames.io/home'\n  }, {\n    title: 'Transaction History',\n    icon: ListIcon,\n    href: 'https://wallet.chaingames.io/transaction-history'\n  }, {\n    title: 'Withdraw',\n    icon: WithdrawIcon,\n    href: 'https://wallet.chaingames.io/withdraw-initiate'\n  }, {\n    title: 'Report Issue',\n    icon: PhoneIcon,\n    href: '/app/'\n  }, {\n    title: 'Account Settings',\n    icon: ToolIcon,\n    href: '/userAccountSettings'\n  }, {\n    title: 'Logout',\n    icon: LogoutIcon,\n    href: '/app/'\n  }]\n}];\n\nfunction renderNavItems({\n  items,\n  pathname,\n  depth = 0\n}) {\n  return /*#__PURE__*/_jsxDEV(List, {\n    disablePadding: true,\n    children: items.reduce((acc, item) => reduceChildRoutes({\n      acc,\n      item,\n      pathname,\n      depth\n    }), [])\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n\nfunction reduceChildRoutes({\n  acc,\n  pathname,\n  item,\n  depth\n}) {\n  const key = item.title + depth;\n\n  if (item.items) {\n    const open = matchPath(pathname, {\n      path: item.href,\n      exact: false\n    });\n    acc.push( /*#__PURE__*/_jsxDEV(NavItem, {\n      depth: depth,\n      icon: item.icon,\n      info: item.info,\n      open: Boolean(open),\n      title: item.title,\n      children: renderNavItems({\n        depth: depth + 1,\n        pathname,\n        items: item.items\n      })\n    }, key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this));\n  } else {\n    acc.push( /*#__PURE__*/_jsxDEV(NavItem, {\n      depth: depth,\n      href: item.href,\n      icon: item.icon,\n      info: item.info,\n      title: item.title\n    }, key, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this));\n  }\n\n  return acc;\n}\n\nconst useStyles = makeStyles(theme => ({\n  mobileDrawer: {\n    width: 256\n  },\n  desktopDrawer: {\n    width: 256,\n    top: 64,\n    height: 'calc(100% - 64px)'\n  },\n  avatar: {\n    cursor: 'pointer',\n    width: 64,\n    height: 64\n  },\n  paper: {\n    backgroundColor: '#38383E',\n    width: 116,\n    padding: 0,\n    paddingTop: 3\n  },\n  paperApprove: {\n    backgroundColor: '#38383E',\n    width: 240,\n    padding: 0,\n    paddingTop: 3\n  },\n  button: {\n    textTransform: 'none',\n    borderRadius: 3\n  }\n}));\n\nconst NavBar = ({\n  onOpen\n}) => {\n  _s();\n\n  var _user$user, _user$user$session;\n\n  const classes = useStyles();\n  const location = useLocation();\n  const acc = useSelector(state => state.account);\n  const {\n    user\n  } = useContext(AuthContext);\n  const account = (_user$user = user.user) === null || _user$user === void 0 ? void 0 : (_user$user$session = _user$user.session) === null || _user$user$session === void 0 ? void 0 : _user$user$session.ethAddress;\n  const [showNotification, setShowNotification] = useState(false);\n  const [showWizardModal, setShowWizardModal] = useState(false);\n  const [chainNetworkBalance, setChainNetworkBalance] = useState(0);\n  const [approveBalance, setApprovedBalance] = useState(0);\n  const [fiatBalance, setFiatBalance] = useState(0);\n  const [totalWinnings, setTotalWinnings] = useState(0);\n  const [totalEvents, setTotalEvents] = useState(0);\n  const [currentStep, setCurrentStep] = useState(WizardEnums.AccountLink);\n  useEffect(() => {\n    var _user$user$session2;\n\n    if (!((_user$user$session2 = user.user.session) === null || _user$user$session2 === void 0 ? void 0 : _user$user$session2.ethAddress)) {\n      setShowNotification(true);\n    } else {\n      setShowNotification(false);\n    }\n  }, [user.user.session]);\n\n  const getInfoFromAPI = async () => {\n    try {\n      var _winnings$data, _events$data;\n\n      const [winnings, events, balanceInfo] = await Promise.all([getTotalWinningsService({}), getTotalEventsService({}), getBalanceFromCS({})]);\n\n      if ((_winnings$data = winnings.data) === null || _winnings$data === void 0 ? void 0 : _winnings$data.success) {\n        setTotalWinnings(winnings.data.winnings);\n      }\n\n      if ((_events$data = events.data) === null || _events$data === void 0 ? void 0 : _events$data.success) {\n        setTotalEvents(events.data.totalEvents);\n      }\n\n      if (balanceInfo.data.success) {\n        setFiatBalance(balanceInfo.data.fiat);\n        const allowanceFormatInChain = formatInCHAIN(balanceInfo.data.token.allowance);\n        const networkFormatInChain = formatInCHAIN(balanceInfo.data.token.total);\n        setApprovedBalance(allowanceFormatInChain);\n        setChainNetworkBalance(networkFormatInChain);\n\n        if (account) {\n          if (MAX_APPROVED_BALANCE > allowanceFormatInChain) {\n            setCurrentStep(WizardEnums.Approve);\n            setShowWizardModal(true);\n          } else if (networkFormatInChain <= 0) {\n            setCurrentStep(WizardEnums.Deposit);\n            setShowWizardModal(true);\n          } else {\n            setCurrentStep(WizardEnums.ConsoleLink);\n            setShowWizardModal(true);\n          }\n        } else {\n          setCurrentStep(WizardEnums.AccountLink);\n          setShowWizardModal(true);\n        }\n      }\n    } catch (error) {\n      console.log(\"ðŸš€ ~ file: DashboardSectionOne.js ~ line 102 ~ getInfoFromAPI ~ error\", error);\n      Sentry.captureException(error, {\n        tags: {\n          page: location.pathname\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    setTotalEvents(0);\n    setTotalWinnings(0);\n    getInfoFromAPI();\n  }, []);\n\n  const content = /*#__PURE__*/_jsxDEV(Box, {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    children: /*#__PURE__*/_jsxDEV(PerfectScrollbar, {\n      options: {\n        suppressScrollX: true\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        p: 2,\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          justifyContent: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            className: classes.avatar,\n            src: \"/static/images/panda.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"stretch\",\n        padding: 1,\n        children: [/*#__PURE__*/_jsxDEV(Paper, {\n          className: classes.paper,\n          elevation: 3,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            className: classes.overview,\n            textAlign: \"center\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              display: \"inline\",\n              variant: \"body1\",\n              color: \"textPrimary\",\n              children: [\"$\", /*#__PURE__*/_jsxDEV(NumberFormat, {\n                value: fiatBalance.toFixed(2),\n                displayType: 'text',\n                thousandSeparator: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            justifyContent: \"center\",\n            display: \"flex\",\n            mt: 1,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: classes.button,\n              size: \"small\",\n              color: \"secondary\",\n              variant: \"outlined\",\n              component: RouterLink,\n              to: \"#\",\n              fullWidth: true,\n              children: \"+Add Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          flexGrow: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          className: classes.paper,\n          elevation: 3,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            className: classes.overview,\n            textAlign: \"center\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              display: \"inline\",\n              variant: \"body1\",\n              color: \"textPrimary\",\n              children: /*#__PURE__*/_jsxDEV(NumberFormat, {\n                value: chainNetworkBalance ? chainNetworkBalance : 0,\n                displayType: 'text',\n                thousandSeparator: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mt: 1,\n            display: \"flex\",\n            justifyContent: \"center\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: classes.button,\n              size: \"small\",\n              color: \"secondary\",\n              variant: \"outlined\",\n              to: DepositRedirectLink,\n              fullWidth: true,\n              children: \"Deposit CHAIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        alignItems: \"center\",\n        padding: 1,\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          className: classes.paperApprove,\n          elevation: 3,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            className: classes.overview,\n            textAlign: \"center\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              display: \"inline\",\n              variant: \"body1\",\n              color: \"textPrimary\",\n              children: [\"here icon\", MAX_APPROVED_BALANCE <= approveBalance ? 'success icon' : 'failure icon']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            justifyContent: \"center\",\n            display: \"flex\",\n            mt: 1,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: classes.button,\n              size: \"small\",\n              color: \"secondary\",\n              variant: \"outlined\",\n              to: ApproveRedirectLink,\n              disabled: MAX_APPROVED_BALANCE <= approveBalance,\n              fullWidth: true,\n              children: \"Approve\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        p: 2,\n        children: mySections.map(section => /*#__PURE__*/_jsxDEV(List, {\n          subheader: /*#__PURE__*/_jsxDEV(ListSubheader, {\n            disableGutters: true,\n            disableSticky: true,\n            children: section.subheader\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 17\n          }, this),\n          children: renderNavItems({\n            items: section.items,\n            pathname: location.pathname\n          })\n        }, section.subheader, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        p: 2,\n        children: sections.map(section => /*#__PURE__*/_jsxDEV(List, {\n          subheader: /*#__PURE__*/_jsxDEV(ListSubheader, {\n            disableGutters: true,\n            disableSticky: true,\n            children: section.subheader\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 17\n          }, this),\n          children: renderNavItems({\n            items: section.items,\n            pathname: location.pathname\n          })\n        }, section.subheader, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 295,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(Drawer, {\n    anchor: \"right\",\n    classes: {\n      paper: classes.desktopDrawer\n    },\n    open: onOpen,\n    variant: \"persistent\",\n    children: content\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 471,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NavBar, \"K2rYTmexMiqHoLxqvlBLMVxw/88=\", false, function () {\n  return [useStyles, useLocation, useSelector];\n});\n\n_c = NavBar;\nNavBar.propTypes = {\n  onOpen: PropTypes.bool\n};\nexport default NavBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"NavBar\");","map":{"version":3,"sources":["C:/Users/mukki/Documents/workspace/chaingames/battleBoard/client/src/layouts/MainLayout/NavBar/index.js"],"names":["React","useState","useEffect","useContext","useLocation","matchPath","Link","RouterLink","PerfectScrollbar","PropTypes","Avatar","Box","Button","Divider","Drawer","List","ListSubheader","Paper","Typography","makeStyles","User","UserIcon","Settings","ToolIcon","LogOut","LogoutIcon","ListIcon","CreditCard","CreditcardIcon","Phone","PhoneIcon","ChevronsDown","WithdrawIcon","Award","AwardIcon","Calendar","CalendarIcon","NavItem","NumberFormat","useSelector","Sentry","AuthContext","ApproveRedirectLink","DepositRedirectLink","RedirectURL","RegisterEthAddressRedirectURL","getBalance","formatInCHAIN","getTotalEventsService","getTotalWinningsService","getBalanceFromCS","MAX_APPROVED_BALANCE","WizardEnums","AccountLink","Approve","Deposit","ConsoleLink","mySections","items","title","icon","href","sections","renderNavItems","pathname","depth","reduce","acc","item","reduceChildRoutes","key","open","path","exact","push","info","Boolean","useStyles","theme","mobileDrawer","width","desktopDrawer","top","height","avatar","cursor","paper","backgroundColor","padding","paddingTop","paperApprove","button","textTransform","borderRadius","NavBar","onOpen","classes","location","state","account","user","session","ethAddress","showNotification","setShowNotification","showWizardModal","setShowWizardModal","chainNetworkBalance","setChainNetworkBalance","approveBalance","setApprovedBalance","fiatBalance","setFiatBalance","totalWinnings","setTotalWinnings","totalEvents","setTotalEvents","currentStep","setCurrentStep","getInfoFromAPI","winnings","events","balanceInfo","Promise","all","data","success","fiat","allowanceFormatInChain","token","allowance","networkFormatInChain","total","error","console","log","captureException","tags","page","content","suppressScrollX","overview","toFixed","map","section","subheader","propTypes","bool"],"mappings":"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","sourcesContent":["/* eslint-disable no-use-before-define */\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { useLocation, matchPath } from 'react-router-dom';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  Drawer,\r\n  List,\r\n  ListSubheader,\r\n  Paper,\r\n  Typography,\r\n  makeStyles\r\n} from '@material-ui/core';\r\nimport {\r\n  User as UserIcon,\r\n  Settings as ToolIcon,\r\n  LogOut as LogoutIcon,\r\n  List as ListIcon,\r\n  CreditCard as CreditcardIcon,\r\n  Phone as PhoneIcon,\r\n  ChevronsDown as WithdrawIcon,\r\n  Award as AwardIcon,\r\n  Calendar as CalendarIcon\r\n} from 'react-feather';\r\nimport NavItem  from './NavItem';\r\nimport NumberFormat from 'react-number-format';\r\nimport { useSelector } from 'src/store';\r\n\r\n//import Notification from './EthAddressNotLinkedNotification'\r\nimport * as Sentry from \"@sentry/react\";\r\nimport { AuthContext } from \"../../../context/AuthContext\";\r\nimport {\r\n  ApproveRedirectLink,\r\n  DepositRedirectLink,\r\n  RedirectURL,\r\n  RegisterEthAddressRedirectURL,\r\n} from \"../../../config/constants\";\r\nimport { getBalance, formatInCHAIN } from '../../../utils/helpers.js';\r\nimport {getTotalEventsService, getTotalWinningsService, getBalanceFromCS} from '../../../service/node.service'\r\nimport { MAX_APPROVED_BALANCE } from '../../../config/constants';\r\n//import Wizard from '../initialStepsWizard/index';\r\n\r\nconst WizardEnums = {\r\n  AccountLink: 1,\r\n  Approve: 2,\r\n  Deposit: 3,\r\n  ConsoleLink: 4,\r\n}\r\n\r\n\r\nconst mySections = [\r\n  {\r\n    items: [\r\n      {\r\n        title: 'My Events',\r\n        icon: CalendarIcon,\r\n        href: '/upcomingEvents'\r\n      },\r\n      {\r\n        title: 'My Challanges',\r\n        icon: AwardIcon,\r\n        href: '/challenges'\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n\r\nconst sections = [\r\n  {\r\n    items: [\r\n      {\r\n        title: 'Profile',\r\n        icon: UserIcon,\r\n        href: '/profile'\r\n      },\r\n      {\r\n        title: 'My Wallet',\r\n        icon: CreditcardIcon,\r\n        href: 'https://wallet.chaingames.io/home'\r\n      },\r\n      {\r\n        title: 'Transaction History',\r\n        icon: ListIcon,\r\n        href: 'https://wallet.chaingames.io/transaction-history'\r\n      },\r\n      {\r\n        title: 'Withdraw',\r\n        icon: WithdrawIcon,\r\n        href: 'https://wallet.chaingames.io/withdraw-initiate'\r\n      },\r\n      {\r\n        title: 'Report Issue',\r\n        icon: PhoneIcon,\r\n        href: '/app/'\r\n      },\r\n      {\r\n        title: 'Account Settings',\r\n        icon: ToolIcon,\r\n        href: '/userAccountSettings'\r\n      },\r\n      {\r\n        title: 'Logout',\r\n        icon: LogoutIcon,\r\n        href: '/app/'\r\n      },\r\n    ]\r\n  }\r\n];\r\n\r\nfunction renderNavItems({\r\n  items,\r\n  pathname,\r\n  depth = 0\r\n}) {\r\n  return (\r\n    <List disablePadding>\r\n      {items.reduce(\r\n        (acc, item) => reduceChildRoutes({ acc, item, pathname, depth }),\r\n        []\r\n      )}\r\n    </List>\r\n  );\r\n}\r\n\r\nfunction reduceChildRoutes({\r\n  acc,\r\n  pathname,\r\n  item,\r\n  depth\r\n}) {\r\n  const key = item.title + depth;\r\n\r\n  if (item.items) {\r\n    const open = matchPath(pathname, {\r\n      path: item.href,\r\n      exact: false\r\n    });\r\n\r\n    acc.push(\r\n      <NavItem\r\n        depth={depth}\r\n        icon={item.icon}\r\n        info={item.info}\r\n        key={key}\r\n        open={Boolean(open)}\r\n        title={item.title}\r\n      >\r\n        {renderNavItems({\r\n          depth: depth + 1,\r\n          pathname,\r\n          items: item.items\r\n        })}\r\n      </NavItem>\r\n    );\r\n  } else {\r\n    acc.push(\r\n      <NavItem\r\n        depth={depth}\r\n        href={item.href}\r\n        icon={item.icon}\r\n        info={item.info}\r\n        key={key}\r\n        title={item.title}\r\n      />\r\n    );\r\n  }\r\n\r\n  return acc;\r\n}\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  mobileDrawer: {\r\n    width: 256\r\n  },\r\n  desktopDrawer: {\r\n    width: 256,\r\n    top: 64,\r\n    height: 'calc(100% - 64px)'\r\n  },\r\n  avatar: {\r\n    cursor: 'pointer',\r\n    width: 64,\r\n    height: 64\r\n  },\r\n  paper: {\r\n    backgroundColor: '#38383E',\r\n    width: 116,\r\n    padding: 0,\r\n    paddingTop: 3\r\n  },\r\n  paperApprove: {\r\n    backgroundColor: '#38383E',\r\n    width: 240,\r\n    padding: 0,\r\n    paddingTop: 3\r\n  },\r\n  button: {\r\n    textTransform: 'none',\r\n    borderRadius: 3\r\n  }\r\n}));\r\n\r\nconst NavBar = ({ onOpen }) => {\r\n  const classes = useStyles();\r\n  const location = useLocation();\r\n  const acc = useSelector((state) => state.account);\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const  account = user.user?.session?.ethAddress;\r\n  \r\n  const [showNotification, setShowNotification] = useState(false);\r\n  const [showWizardModal, setShowWizardModal] = useState(false);\r\n  const [chainNetworkBalance, setChainNetworkBalance] = useState(0);\r\n  const [approveBalance, setApprovedBalance] = useState(0);\r\n  const [fiatBalance, setFiatBalance] = useState(0);\r\n  const [totalWinnings, setTotalWinnings] = useState(0);\r\n  const [totalEvents, setTotalEvents] = useState(0);\r\n  const [currentStep, setCurrentStep] = useState(WizardEnums.AccountLink);\r\n\r\n  useEffect(() => {\r\n    if (!user.user.session?.ethAddress) {\r\n      setShowNotification(true);\r\n    } else {\r\n      setShowNotification(false);\r\n    }\r\n  }, [user.user.session]);\r\n\r\n  const getInfoFromAPI = async () => {\r\n    try {\r\n      const [winnings, events, balanceInfo] = await Promise.all(\r\n        [getTotalWinningsService({}),\r\n          getTotalEventsService({}),\r\n          getBalanceFromCS({}),\r\n        ])\r\n      if (winnings.data?.success) {\r\n        setTotalWinnings(winnings.data.winnings);\r\n      }\r\n      if (events.data?.success) {\r\n        setTotalEvents(events.data.totalEvents);\r\n      }\r\n      if (balanceInfo.data.success) {\r\n        setFiatBalance(balanceInfo.data.fiat);\r\n        const allowanceFormatInChain = formatInCHAIN(balanceInfo.data.token.allowance);\r\n        const networkFormatInChain = formatInCHAIN(balanceInfo.data.token.total);\r\n\r\n        setApprovedBalance(allowanceFormatInChain);\r\n        setChainNetworkBalance(networkFormatInChain);\r\n        if (account) {\r\n          if (MAX_APPROVED_BALANCE > allowanceFormatInChain) {\r\n            setCurrentStep(WizardEnums.Approve);\r\n            setShowWizardModal(true);\r\n          }\r\n          else if (networkFormatInChain <= 0) {\r\n            setCurrentStep(WizardEnums.Deposit);\r\n            setShowWizardModal(true);\r\n          }\r\n          else {\r\n            setCurrentStep(WizardEnums.ConsoleLink);\r\n            setShowWizardModal(true);\r\n          }\r\n        }\r\n        else {\r\n          setCurrentStep(WizardEnums.AccountLink)\r\n          setShowWizardModal(true);\r\n        }\r\n      }\r\n      \r\n    }\r\n    catch (error) {\r\n      console.log(\"ðŸš€ ~ file: DashboardSectionOne.js ~ line 102 ~ getInfoFromAPI ~ error\", error)\r\n      Sentry.captureException(error, {\r\n        tags: {\r\n          page: location.pathname,\r\n        },\r\n    });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTotalEvents(0);\r\n    setTotalWinnings(0);\r\n    getInfoFromAPI();\r\n  }, []);\r\n\r\n\r\n  const content = (\r\n    <Box\r\n      height='100%'\r\n      display='flex'\r\n      flexDirection='column'\r\n    >\r\n      <PerfectScrollbar options={{ suppressScrollX: true }}>\r\n      {/* <Divider /> */}\r\n        <Box p={2}>\r\n          <Box\r\n            display='flex'\r\n            justifyContent='center'\r\n          >\r\n            <Avatar className={classes.avatar} src=\"/static/images/panda.png\">\r\n            </Avatar>\r\n          </Box>\r\n        </Box>\r\n        {/* <Divider /> */}\r\n        <Box display=\"flex\" flexDirection=\"row\" alignItems=\"stretch\" padding={1}>\r\n          <Paper className={classes.paper} elevation={3} >\r\n            <Box className={classes.overview}\r\n              textAlign=\"center\"\r\n            >\r\n              <Typography\r\n                display=\"inline\"\r\n                variant=\"body1\"\r\n                color=\"textPrimary\"\r\n              >\r\n                $\r\n                <NumberFormat \r\n                  value={fiatBalance.toFixed(2)} \r\n                  displayType={'text'} \r\n                  thousandSeparator={true} \r\n                />\r\n              </Typography>\r\n            </Box>\r\n            <Box\r\n              justifyContent='center'\r\n              display='flex'\r\n              mt={1}\r\n            >\r\n              <Button\r\n                className={classes.button}\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                variant=\"outlined\"\r\n                component={RouterLink}\r\n                to=\"#\"\r\n                fullWidth\r\n              >\r\n                +Add Cash\r\n              </Button>\r\n            </Box>    \r\n          </Paper>\r\n          <Box flexGrow={1} />\r\n          <Paper className={classes.paper}\r\n            elevation={3}\r\n          >\r\n            <Box className={classes.overview}\r\n              textAlign=\"center\"\r\n            >\r\n            <Typography\r\n              display=\"inline\"\r\n              variant=\"body1\"\r\n              color=\"textPrimary\"\r\n            >\r\n              <NumberFormat \r\n                value={chainNetworkBalance ? chainNetworkBalance : 0} \r\n                displayType={'text'} \r\n                thousandSeparator={true} \r\n              />\r\n            </Typography>\r\n            </Box>\r\n            <Box\r\n              mt={1}\r\n              display=\"flex\"\r\n              justifyContent='center'\r\n            >\r\n              <Button\r\n                className={classes.button}\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                variant=\"outlined\"\r\n                to={DepositRedirectLink}\r\n                fullWidth\r\n              >\r\n                Deposit CHAIN\r\n              </Button>\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n        <Box alignItems=\"center\" padding={1}>\r\n          <Paper className={classes.paperApprove} elevation={3}>\r\n            <Box className={classes.overview}\r\n              textAlign=\"center\"\r\n            >\r\n              <Typography\r\n                display=\"inline\"\r\n                variant=\"body1\"\r\n                color=\"textPrimary\"\r\n              >\r\n                here icon\r\n                {MAX_APPROVED_BALANCE <= approveBalance ?\r\n                  'success icon'\r\n                    :\r\n                  'failure icon'\r\n                }\r\n              </Typography>\r\n            </Box>\r\n            <Box\r\n              justifyContent='center'\r\n              display='flex'\r\n              mt={1}\r\n            >\r\n              <Button\r\n                className={classes.button}\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                variant=\"outlined\"\r\n                to={ApproveRedirectLink}\r\n                disabled={\r\n                  MAX_APPROVED_BALANCE <= approveBalance\r\n                }\r\n                fullWidth\r\n              >\r\n                Approve\r\n              </Button>\r\n            </Box>    \r\n          </Paper>\r\n        </Box>\r\n        {/* <Divider /> */}\r\n        <Box p={2}>\r\n          {mySections.map(section => (\r\n            <List\r\n              key={section.subheader}\r\n              subheader={(\r\n                <ListSubheader\r\n                  disableGutters\r\n                  disableSticky\r\n                >\r\n                  {section.subheader}\r\n                </ListSubheader>\r\n              )}\r\n            >\r\n              {renderNavItems({\r\n                items: section.items,\r\n                pathname: location.pathname\r\n              })}\r\n            </List>\r\n          ))}\r\n        </Box>\r\n        <Divider />\r\n        <Box p={2}>\r\n          {sections.map(section => (\r\n            <List\r\n              key={section.subheader}\r\n              subheader={(\r\n                <ListSubheader\r\n                  disableGutters\r\n                  disableSticky\r\n                >\r\n                  {section.subheader}\r\n                </ListSubheader>\r\n              )}\r\n            >\r\n              {renderNavItems({\r\n                items: section.items,\r\n                pathname: location.pathname\r\n              })}\r\n            </List>\r\n          ))}\r\n        </Box>\r\n      </PerfectScrollbar>\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Drawer\r\n      anchor=\"right\"\r\n      classes={{ paper: classes.desktopDrawer }}\r\n      open={onOpen}\r\n      variant=\"persistent\"\r\n    >\r\n      {content}\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nNavBar.propTypes = {\r\n  onOpen: PropTypes.bool\r\n};\r\n\r\nexport default NavBar;\r\n"]},"metadata":{},"sourceType":"module"}