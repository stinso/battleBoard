{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mukki\\\\Documents\\\\workspace\\\\chaingames\\\\battleBoard\\\\client\\\\src\\\\views\\\\auth\\\\LoginView\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport clsx from 'clsx';\nimport { useHistory } from 'react-router-dom';\nimport * as Yup from 'yup';\nimport PropTypes from 'prop-types';\nimport { Formik } from 'formik';\nimport { Box, Button, FormHelperText, TextField, makeStyles } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef'; // new\n\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport { useEffect, useState, useContext } from 'react';\nimport { loginService } from '../../../service/node.service.js';\nimport { SignUpRedirectURL, ForgotPasswordRedirectURL, RecaptchaSiteKey } from '../../../config/constants';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { LOGIN_REQUEST } from '../../../actions/actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst Login = ({\n  className,\n  ...rest\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef(); // new\n\n  const history = useHistory();\n  const {\n    dispatch\n  } = useContext(AuthContext);\n  const [errMsg, setErrMsg] = useState();\n  useEffect(() => {\n    document.documentElement.scrollTop = 0;\n    document.scrollingElement.scrollTop = 0;\n    document.body.classList.add(\"login-page\");\n  }, []);\n\n  async function onLoginButtonClick(e) {\n    setErrMsg('');\n    e.preventDefault();\n\n    if (userName && password && captchaVerified) {\n      try {\n        let formData = {\n          username: userName,\n          reCaptchaToken: captchaToken,\n          password\n        };\n        const response = await loginService(formData);\n        const data = response.data;\n\n        if (data.success === true) {\n          dispatch({\n            type: LOGIN_REQUEST,\n            payload: { ...data\n            }\n          });\n\n          if (redirect) {\n            router.push(redirect);\n          } else {\n            router.push('/dashboard');\n          }\n        } else {\n          setErrMsg('Something went wrong. Please try again');\n        }\n      } catch (error) {\n        console.log(\"onLoginButtonClick -> error\", error);\n        recaptchaRef.current.reset();\n\n        if (error.response) {\n          setErrMsg(error.response.data.error);\n        }\n      }\n    } else if (!userName) {\n      setErrMsg('Please enter User Name');\n    } else if (!password) {\n      setErrMsg('Please enter Password');\n    } else if (!captchaVerified) {\n      setErrMsg('Please complete Captcha');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Formik, {\n    initialValues: {\n      email: 'mukki',\n      password: 'Proevo08!',\n      submit: null\n    },\n    validationSchema: Yup.object().shape({\n      //email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\n      password: Yup.string().max(255).required('Password is required')\n    }),\n    onSubmit: async (values, {\n      setErrors,\n      setStatus,\n      setSubmitting\n    }) => {\n      try {\n        let formData = {\n          username: values.email,\n          reCaptchaToken: ' ',\n          password: values.password\n        };\n        const response = await loginService(formData);\n\n        if (isMountedRef.current) {\n          setStatus({\n            success: true\n          });\n          setSubmitting(false);\n        }\n\n        const data = response.data;\n\n        if (data.success === true) {\n          dispatch({\n            type: LOGIN_REQUEST,\n            payload: { ...data\n            }\n          });\n          history.push('/dashboard');\n          console.log('######## LOGIN SUCCESS! ########');\n        } else {\n          setErrMsg('Something went wrong. Please try again');\n          console.log('######## LOGIN ERROR! ########');\n        }\n      } catch (error) {\n        console.log('++++++++');\n        console.error(error);\n\n        if (isMountedRef.current) {\n          setStatus({\n            success: false\n          });\n          setErrors({\n            submit: error.message\n          });\n          setSubmitting(false);\n        }\n\n        console.log(\"onLoginButtonClick -> error\", error);\n        recaptchaRef.current.reset();\n\n        if (error.response) {\n          setErrMsg(error.response.data.error);\n        }\n      }\n    },\n    children: ({\n      errors,\n      handleBlur,\n      handleChange,\n      handleSubmit,\n      isSubmitting,\n      touched,\n      values\n    }) => /*#__PURE__*/_jsxDEV(\"form\", {\n      noValidate: true,\n      onSubmit: handleSubmit,\n      className: clsx(classes.root, className),\n      ...rest,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        error: Boolean(touched.email && errors.email),\n        fullWidth: true,\n        autoFocus: true,\n        helperText: touched.email && errors.email,\n        label: \"Email Address\",\n        margin: \"normal\",\n        name: \"email\",\n        onBlur: handleBlur,\n        onChange: handleChange,\n        type: \"email\",\n        value: values.email,\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        error: Boolean(touched.password && errors.password),\n        fullWidth: true,\n        helperText: touched.password && errors.password,\n        label: \"Password\",\n        margin: \"normal\",\n        name: \"password\",\n        onBlur: handleBlur,\n        onChange: handleChange,\n        type: \"password\",\n        value: values.password,\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this), errors.submit && /*#__PURE__*/_jsxDEV(Box, {\n        mt: 3,\n        children: /*#__PURE__*/_jsxDEV(FormHelperText, {\n          error: true,\n          children: errors.submit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          disabled: isSubmitting,\n          fullWidth: true,\n          size: \"large\",\n          type: \"submit\",\n          variant: \"contained\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 2,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"info\",\n          children: \"Wrong Username or Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"xpOYbKbKNN5BkgNKUVsG/g6p6cI=\", false, function () {\n  return [useStyles, useIsMountedRef, useHistory];\n});\n\n_c = Login;\nLogin.propTypes = {\n  className: PropTypes.string\n};\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/mukki/Documents/workspace/chaingames/battleBoard/client/src/views/auth/LoginView/Login.js"],"names":["React","clsx","useHistory","Yup","PropTypes","Formik","Box","Button","FormHelperText","TextField","makeStyles","Alert","useIsMountedRef","ReCAPTCHA","useEffect","useState","useContext","loginService","SignUpRedirectURL","ForgotPasswordRedirectURL","RecaptchaSiteKey","AuthContext","LOGIN_REQUEST","useStyles","root","Login","className","rest","classes","isMountedRef","history","dispatch","errMsg","setErrMsg","document","documentElement","scrollTop","scrollingElement","body","classList","add","onLoginButtonClick","e","preventDefault","userName","password","captchaVerified","formData","username","reCaptchaToken","captchaToken","response","data","success","type","payload","redirect","router","push","error","console","log","recaptchaRef","current","reset","email","submit","object","shape","string","max","required","values","setErrors","setStatus","setSubmitting","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","Boolean","propTypes"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { useHistory } from 'react-router-dom';\r\nimport * as Yup from 'yup';\r\nimport PropTypes from 'prop-types';\r\nimport { Formik } from 'formik';\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormHelperText,\r\n  TextField,\r\n  makeStyles\r\n} from '@material-ui/core';\r\nimport { Alert } from '@material-ui/lab';\r\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\r\n\r\n// new\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport { loginService } from '../../../service/node.service.js';\r\nimport { SignUpRedirectURL, ForgotPasswordRedirectURL, RecaptchaSiteKey } from '../../../config/constants';\r\nimport { AuthContext } from '../../../context/AuthContext';\r\nimport { LOGIN_REQUEST } from '../../../actions/actions';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {}\r\n}));\r\n\r\nconst Login = ({ className, ...rest }) => {\r\n  const classes = useStyles();\r\n  const isMountedRef = useIsMountedRef();\r\n\r\n  // new\r\n  const history = useHistory();\r\n  const {dispatch} = useContext(AuthContext);\r\n  const [errMsg, setErrMsg] = useState()\r\n\r\n  useEffect(() =>{\r\n    document.documentElement.scrollTop = 0;\r\n    document.scrollingElement.scrollTop = 0;\r\n    document.body.classList.add(\"login-page\");\r\n  }, [])\r\n\r\n  async function onLoginButtonClick(e){\r\n    setErrMsg('');\r\n    e.preventDefault()\r\n    if(userName && password && captchaVerified){\r\n      try{\r\n        let formData = {\r\n          username: userName,\r\n          reCaptchaToken: captchaToken,\r\n          password\r\n        };\r\n\r\n        \r\n        \r\n        const response = await loginService(formData);\r\n        \r\n        const data = response.data;\r\n        if(data.success === true){\r\n          dispatch({\r\n            type: LOGIN_REQUEST,\r\n            payload: {\r\n              ...data,\r\n            }\r\n          })\r\n          if (redirect) {\r\n            router.push(redirect)\r\n          }\r\n          else {\r\n            router.push('/dashboard')\r\n          }\r\n        }\r\n        else{\r\n          setErrMsg('Something went wrong. Please try again');\r\n        }\r\n      }\r\n      catch(error){\r\n        console.log(\"onLoginButtonClick -> error\", error)\r\n        recaptchaRef.current.reset();\r\n\r\n        if(error.response){\r\n          setErrMsg(error.response.data.error);\r\n        }\r\n        \r\n      }\r\n    }\r\n    else if(!userName){\r\n      setErrMsg('Please enter User Name');\r\n    }\r\n    else if(!password){\r\n      setErrMsg('Please enter Password');\r\n    }\r\n    else if(!captchaVerified){\r\n      setErrMsg('Please complete Captcha');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        email: 'mukki',\r\n        password: 'Proevo08!',\r\n        submit: null\r\n      }}\r\n      validationSchema={Yup.object().shape({\r\n        //email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\r\n        password: Yup.string().max(255).required('Password is required')\r\n      })}\r\n      onSubmit={async (values, {\r\n        setErrors,\r\n        setStatus,\r\n        setSubmitting\r\n      }) => {\r\n        try{\r\n          let formData = {\r\n            username: values.email,\r\n            reCaptchaToken: ' ',\r\n            password: values.password\r\n          };\r\n                    \r\n          const response = await loginService(formData);\r\n\r\n          if (isMountedRef.current) {\r\n            setStatus({ success: true });\r\n            setSubmitting(false);\r\n          }\r\n          \r\n          const data = response.data;\r\n          if(data.success === true){\r\n            dispatch({\r\n              type: LOGIN_REQUEST,\r\n              payload: {\r\n                ...data,\r\n              }\r\n            })\r\n            history.push('/dashboard')\r\n\r\n            console.log('######## LOGIN SUCCESS! ########')\r\n          }\r\n          else{\r\n            setErrMsg('Something went wrong. Please try again');\r\n            console.log('######## LOGIN ERROR! ########')\r\n          }\r\n        }\r\n        catch(error){\r\n          console.log('++++++++')\r\n          console.error(error);\r\n          if (isMountedRef.current) {\r\n            setStatus({ success: false });\r\n            setErrors({ submit: error.message });\r\n            setSubmitting(false);\r\n          }\r\n          \r\n          console.log(\"onLoginButtonClick -> error\", error)\r\n          recaptchaRef.current.reset();\r\n  \r\n          if(error.response){\r\n            setErrMsg(error.response.data.error);\r\n          }\r\n          \r\n        }\r\n      }}\r\n    >\r\n      {({\r\n        errors,\r\n        handleBlur,\r\n        handleChange,\r\n        handleSubmit,\r\n        isSubmitting,\r\n        touched,\r\n        values\r\n      }) => (\r\n        <form\r\n          noValidate\r\n          onSubmit={handleSubmit}\r\n          className={clsx(classes.root, className)}\r\n          {...rest}\r\n        >\r\n          <TextField\r\n            error={Boolean(touched.email && errors.email)}\r\n            fullWidth\r\n            autoFocus\r\n            helperText={touched.email && errors.email}\r\n            label=\"Email Address\"\r\n            margin=\"normal\"\r\n            name=\"email\"\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            type=\"email\"\r\n            value={values.email}\r\n            variant=\"outlined\"\r\n          />\r\n          <TextField\r\n            error={Boolean(touched.password && errors.password)}\r\n            fullWidth\r\n            helperText={touched.password && errors.password}\r\n            label=\"Password\"\r\n            margin=\"normal\"\r\n            name=\"password\"\r\n            onBlur={handleBlur}\r\n            onChange={handleChange}\r\n            type=\"password\"\r\n            value={values.password}\r\n            variant=\"outlined\"\r\n          />\r\n          {errors.submit && (\r\n            <Box mt={3}>\r\n              <FormHelperText error>\r\n                {errors.submit}\r\n              </FormHelperText>\r\n            </Box>\r\n          )}\r\n          <Box mt={2}>\r\n            <Button\r\n              color=\"secondary\"\r\n              disabled={isSubmitting}\r\n              fullWidth\r\n              size=\"large\"\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n            >\r\n              Log In\r\n            </Button>\r\n          </Box>\r\n          <Box mt={2}>\r\n            <Alert\r\n              severity=\"info\"\r\n            >\r\n              Wrong Username or Password\r\n            </Alert>\r\n          </Box>\r\n        </form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  className: PropTypes.string,\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}